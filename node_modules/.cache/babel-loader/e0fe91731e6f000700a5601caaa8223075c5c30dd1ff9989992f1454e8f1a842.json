{"ast":null,"code":"var _jsxFileName = \"/home/tiny/Desktop/TodoApp/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { isBefore, parseISO, addDays, addWeeks, addMonths } from 'date-fns';\nimport { DragDropContext } from '@hello-pangea/dnd';\nimport { initAuth, onAuthChange, subscribeToTasks, addTaskToFirestore, updateTaskInFirestore, deleteTaskFromFirestore } from './firebase';\nimport SyncStatus from './components/SyncStatus';\nimport TopBar from './components/TopBar';\nimport InputContainer from './components/InputContainer';\nimport Toolbar from './components/Toolbar';\nimport TaskList from './components/TaskList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // Input states\n  const [inputText, setInputText] = useState('');\n  const [dueInput, setDueInput] = useState('');\n  const [recurrenceInput, setRecurrenceInput] = useState('none');\n  const [tagInput, setTagInput] = useState('');\n\n  // Task states\n  const [tasks, setTasks] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editingText, setEditingText] = useState('');\n  // History for undo/redo\n  const [historyPast, setHistoryPast] = useState([]);\n  const [historyFuture, setHistoryFuture] = useState([]);\n\n  // Filter states\n  const [filter, setFilter] = useState('all');\n  const [filterTag, setFilterTag] = useState(null);\n  const [searchText, setSearchText] = useState('');\n\n  // Feature states\n  const [notificationsEnabled, setNotificationsEnabled] = useState(false);\n  const [darkMode, setDarkMode] = useState(() => {\n    try {\n      return localStorage.getItem('todoapp_darkmode') === 'true';\n    } catch {\n      return false;\n    }\n  });\n\n  // Firebase states\n  const [userId, setUserId] = useState(null);\n  const [syncStatus, setSyncStatus] = useState('syncing');\n  const [offlineMode, setOfflineMode] = useState(false);\n\n  // Get unique tags from all tasks\n  const allTags = [...new Set(tasks.flatMap(t => t.tags || []))];\n\n  // Load tasks from localStorage on mount\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem('todoapp_tasks');\n      if (raw) setTasks(JSON.parse(raw));\n    } catch (e) {\n      console.warn('Failed to load tasks', e);\n    }\n  }, []);\n\n  // Load history from localStorage on mount\n  useEffect(() => {\n    try {\n      const past = localStorage.getItem('todoapp_history_past');\n      const future = localStorage.getItem('todoapp_history_future');\n      if (past) setHistoryPast(JSON.parse(past));\n      if (future) setHistoryFuture(JSON.parse(future));\n    } catch (e) {\n      console.warn('Failed to load history', e);\n    }\n  }, []);\n\n  // Persist history whenever it changes\n  useEffect(() => {\n    try {\n      localStorage.setItem('todoapp_history_past', JSON.stringify(historyPast));\n      localStorage.setItem('todoapp_history_future', JSON.stringify(historyFuture));\n    } catch (e) {\n      console.warn('Failed to save history', e);\n    }\n  }, [historyPast, historyFuture]);\n\n  // Initialize Firebase and auth\n  useEffect(() => {\n    initAuth();\n    onAuthChange(user => {\n      if (user) {\n        console.log('üîê Logged in as:', user.uid);\n        setUserId(user.uid);\n        setSyncStatus('syncing');\n      }\n    });\n  }, []);\n\n  // Subscribe to Firestore tasks when user logs in\n  useEffect(() => {\n    if (!userId) return;\n    const unsubscribe = subscribeToTasks(userId, firestoreTasks => {\n      console.log('üì• Synced tasks from Firestore:', firestoreTasks);\n      setTasks(firestoreTasks);\n      setSyncStatus('synced');\n      setOfflineMode(false);\n    });\n    return () => unsubscribe && unsubscribe();\n  }, [userId]);\n\n  // Persist tasks whenever they change\n  useEffect(() => {\n    try {\n      localStorage.setItem('todoapp_tasks', JSON.stringify(tasks));\n    } catch (e) {\n      console.warn('Failed to save tasks', e);\n    }\n  }, [tasks]);\n\n  // Persist dark mode\n  useEffect(() => {\n    localStorage.setItem('todoapp_darkmode', darkMode);\n    document.body.className = darkMode ? 'dark-mode' : '';\n  }, [darkMode]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = e => {\n      // Ctrl+D or Cmd+D = toggle dark mode\n      if ((e.ctrlKey || e.metaKey) && e.key === 'd') {\n        e.preventDefault();\n        setDarkMode(prev => !prev);\n      }\n      // Ctrl+Z = Undo ; Ctrl+Shift+Z = Redo\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z') {\n        e.preventDefault();\n        if (e.shiftKey) {\n          redo();\n        } else {\n          undo();\n        }\n      }\n      // Escape = cancel edit\n      if (e.key === 'Escape' && editingId) {\n        setEditingId(null);\n        setEditingText('');\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [editingId]);\n\n  // Notifications: request permission and periodically check due tasks\n  const enableNotifications = async () => {\n    if (!('Notification' in window)) {\n      alert('Browser Anda tidak mendukung Notification API');\n      return;\n    }\n    try {\n      const perm = await Notification.requestPermission();\n      if (perm === 'granted') {\n        setNotificationsEnabled(true);\n      } else {\n        alert('Izin notifikasi ditolak atau dibatalkan');\n      }\n    } catch (e) {\n      console.warn('Notification permission error', e);\n    }\n  };\n  useEffect(() => {\n    let timer = null;\n    if (notificationsEnabled) {\n      // check every 30s\n      timer = setInterval(() => {\n        const now = new Date();\n        setTasks(prev => prev.map(t => {\n          if (t.due && !t.completed && !t.notified) {\n            let dueDate;\n            try {\n              dueDate = parseISO(t.due);\n            } catch {\n              return t;\n            }\n            if (dueDate.getTime() <= now.getTime()) {\n              try {\n                if (Notification.permission === 'granted') {\n                  /* eslint-disable no-new */\n                  const {\n                    format\n                  } = require('date-fns');\n                  new Notification(`Tugas: ${t.text}`, {\n                    body: `Tenggat ${format(dueDate, 'Pp')}`,\n                    tag: `task-${t.id}`\n                  });\n                }\n              } catch (e) {\n                console.warn('Failed sending notification', e);\n              }\n              return {\n                ...t,\n                notified: true\n              };\n            }\n          }\n          return t;\n        }));\n      }, 30000);\n    }\n    return () => {\n      if (timer) clearInterval(timer);\n    };\n  }, [notificationsEnabled]);\n\n  // Core task functions\n  // History helpers for undo/redo\n  const pushHistory = prevTasks => {\n    setHistoryPast(h => {\n      const copy = h.slice(-98); // keep last 99\n      return [...copy, prevTasks];\n    });\n  };\n  const applyChange = updater => {\n    setTasks(prev => {\n      const next = typeof updater === 'function' ? updater(prev) : updater;\n      try {\n        pushHistory(prev);\n      } catch (e) {/* ignore */}\n      setHistoryFuture([]); // clear redo stack\n      return next;\n    });\n  };\n  const undo = () => {\n    setHistoryPast(past => {\n      if (!past || past.length === 0) return past;\n      const previous = past[past.length - 1];\n      setHistoryFuture(f => [tasks, ...f]);\n      setTasks(previous);\n      return past.slice(0, past.length - 1);\n    });\n  };\n  const redo = () => {\n    setHistoryFuture(future => {\n      if (!future || future.length === 0) return future;\n      const nextState = future[0];\n      setHistoryPast(p => [...p, tasks]);\n      setTasks(nextState);\n      return future.slice(1);\n    });\n  };\n  const addTask = () => {\n    if (inputText.trim()) {\n      const newTask = {\n        id: Date.now(),\n        text: inputText.trim(),\n        completed: false,\n        due: dueInput || null,\n        recurrence: recurrenceInput,\n        notified: false,\n        tags: tagInput ? tagInput.split(',').map(t => t.trim()).filter(t => t) : []\n      };\n\n      // Try to sync to Firestore\n      if (userId && !offlineMode) {\n        addTaskToFirestore(newTask, userId).then(docId => {\n          console.log('‚úÖ Task synced to Firestore:', docId);\n          setTasks(prev => prev.map(t => t.id === newTask.id ? {\n            ...t,\n            firestoreId: docId\n          } : t));\n        }).catch(err => {\n          console.warn('‚ö†Ô∏è Failed to sync task to Firestore:', err);\n          setOfflineMode(true);\n          setSyncStatus('error');\n        });\n      }\n      applyChange(prev => [...prev, newTask]);\n      setInputText('');\n      setDueInput('');\n      setRecurrenceInput('none');\n      setTagInput('');\n    } else {\n      alert('Tulis dulu tugasnya!');\n    }\n  };\n  const deleteTask = id => {\n    const task = tasks.find(t => t.id === id);\n    if (userId && task !== null && task !== void 0 && task.firestoreId && !offlineMode) {\n      deleteTaskFromFirestore(userId, task.firestoreId).catch(err => {\n        console.warn('‚ö†Ô∏è Failed to delete task from Firestore:', err);\n        setOfflineMode(true);\n        setSyncStatus('error');\n      });\n    }\n    applyChange(prev => prev.filter(task => task.id !== id));\n  };\n  const toggleComplete = id => {\n    const task = tasks.find(t => t.id === id);\n    if (task && !task.completed && task.recurrence && task.recurrence !== 'none') {\n      handleTaskComplete(id);\n    } else {\n      applyChange(prev => prev.map(t => {\n        if (t.id === id) {\n          const updated = {\n            ...t,\n            completed: !t.completed\n          };\n          if (userId && t.firestoreId && !offlineMode) {\n            updateTaskInFirestore(userId, t.firestoreId, updated).catch(err => {\n              console.warn('‚ö†Ô∏è Failed to update task in Firestore:', err);\n              setOfflineMode(true);\n              setSyncStatus('error');\n            });\n          }\n          return updated;\n        }\n        return t;\n      }));\n    }\n  };\n  const startEdit = task => {\n    setEditingId(task.id);\n    setEditingText(task.text);\n  };\n  const saveEdit = id => {\n    if (!editingText.trim()) {\n      setEditingId(null);\n      setEditingText('');\n      return;\n    }\n    applyChange(prev => prev.map(t => {\n      if (t.id === id) {\n        const updated = {\n          ...t,\n          text: editingText.trim(),\n          notified: t.due && isBefore(parseISO(t.due), new Date()) ? t.notified : false\n        };\n        if (userId && t.firestoreId && !offlineMode) {\n          updateTaskInFirestore(userId, t.firestoreId, updated).catch(err => {\n            console.warn('‚ö†Ô∏è Failed to update task in Firestore:', err);\n            setOfflineMode(true);\n            setSyncStatus('error');\n          });\n        }\n        return updated;\n      }\n      return t;\n    }));\n    setEditingId(null);\n    setEditingText('');\n  };\n  const clearCompleted = () => {\n    applyChange(prev => prev.filter(t => !t.completed));\n  };\n\n  // Recurring task handler: when completed, generate next occurrence\n  const handleTaskComplete = id => {\n    applyChange(prev => {\n      const result = [];\n      prev.forEach(t => {\n        if (t.id === id) {\n          result.push({\n            ...t,\n            completed: true\n          });\n          if (t.recurrence && t.recurrence !== 'none' && t.due) {\n            try {\n              const dueDate = parseISO(t.due);\n              let nextDue = null;\n              if (t.recurrence === 'daily') nextDue = addDays(dueDate, 1).toISOString();else if (t.recurrence === 'weekly') nextDue = addWeeks(dueDate, 1).toISOString();else if (t.recurrence === 'monthly') nextDue = addMonths(dueDate, 1).toISOString();\n              if (nextDue) {\n                result.push({\n                  id: Date.now() + Math.random(),\n                  text: t.text,\n                  completed: false,\n                  due: nextDue,\n                  recurrence: t.recurrence,\n                  notified: false,\n                  tags: t.tags || []\n                });\n              }\n            } catch (e) {\n              console.warn('Recurrence calc error', e);\n            }\n          }\n        } else {\n          result.push(t);\n        }\n      });\n      return result;\n    });\n  };\n\n  // Filter logic\n  const filtered = tasks.filter(t => {\n    if (filter === 'active') return !t.completed;\n    if (filter === 'completed') return t.completed;\n    return true;\n  }).filter(t => filterTag ? t.tags && t.tags.includes(filterTag) : true).filter(t => searchText ? t.text.toLowerCase().includes(searchText.toLowerCase()) : true);\n  const remaining = tasks.filter(t => !t.completed).length;\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') addTask();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uD83D\\uDCDD To-Do List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SyncStatus, {\n      syncStatus: syncStatus,\n      offlineMode: offlineMode,\n      userId: userId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TopBar, {\n      searchText: searchText,\n      onSearchChange: setSearchText,\n      darkMode: darkMode,\n      onThemeToggle: () => setDarkMode(!darkMode)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n      inputText: inputText,\n      onInputChange: setInputText,\n      onInputKeyPress: handleKeyPress,\n      dueInput: dueInput,\n      onDueChange: setDueInput,\n      recurrenceInput: recurrenceInput,\n      onRecurrenceChange: setRecurrenceInput,\n      tagInput: tagInput,\n      onTagChange: setTagInput,\n      onAddTask: addTask\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Toolbar, {\n      filter: filter,\n      onFilterChange: setFilter,\n      allTags: allTags,\n      filterTag: filterTag,\n      onFilterTagChange: setFilterTag,\n      remaining: remaining,\n      onClearCompleted: clearCompleted,\n      notificationsEnabled: notificationsEnabled,\n      onToggleNotifications: () => notificationsEnabled ? setNotificationsEnabled(false) : enableNotifications(),\n      onUndo: undo,\n      onRedo: redo,\n      canUndo: historyPast.length > 0,\n      canRedo: historyFuture.length > 0\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: result => {\n        const {\n          destination,\n          source\n        } = result;\n        if (!destination) return;\n        if (destination.index === source.index) return;\n        applyChange(prev => {\n          const copy = Array.from(prev);\n          const [moved] = copy.splice(source.index, 1);\n          copy.splice(destination.index, 0, moved);\n          return copy;\n        });\n      },\n      children: /*#__PURE__*/_jsxDEV(TaskList, {\n        filtered: filtered,\n        editingId: editingId,\n        editingText: editingText,\n        onEditingTextChange: setEditingText,\n        onStartEdit: startEdit,\n        onSaveEdit: saveEdit,\n        onToggleComplete: toggleComplete,\n        onDeleteTask: deleteTask\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 390,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"IHVlS1zLJvNC+9AWdp19ZYCB6ZM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","isBefore","parseISO","addDays","addWeeks","addMonths","DragDropContext","initAuth","onAuthChange","subscribeToTasks","addTaskToFirestore","updateTaskInFirestore","deleteTaskFromFirestore","SyncStatus","TopBar","InputContainer","Toolbar","TaskList","jsxDEV","_jsxDEV","App","_s","inputText","setInputText","dueInput","setDueInput","recurrenceInput","setRecurrenceInput","tagInput","setTagInput","tasks","setTasks","editingId","setEditingId","editingText","setEditingText","historyPast","setHistoryPast","historyFuture","setHistoryFuture","filter","setFilter","filterTag","setFilterTag","searchText","setSearchText","notificationsEnabled","setNotificationsEnabled","darkMode","setDarkMode","localStorage","getItem","userId","setUserId","syncStatus","setSyncStatus","offlineMode","setOfflineMode","allTags","Set","flatMap","t","tags","raw","JSON","parse","e","console","warn","past","future","setItem","stringify","user","log","uid","unsubscribe","firestoreTasks","document","body","className","handleKeyDown","ctrlKey","metaKey","key","preventDefault","prev","shiftKey","redo","undo","window","addEventListener","removeEventListener","enableNotifications","alert","perm","Notification","requestPermission","timer","setInterval","now","Date","map","due","completed","notified","dueDate","getTime","permission","format","require","text","tag","id","clearInterval","pushHistory","prevTasks","h","copy","slice","applyChange","updater","next","length","previous","f","nextState","p","addTask","trim","newTask","recurrence","split","then","docId","firestoreId","catch","err","deleteTask","task","find","toggleComplete","handleTaskComplete","updated","startEdit","saveEdit","clearCompleted","result","forEach","push","nextDue","toISOString","Math","random","filtered","includes","toLowerCase","remaining","handleKeyPress","children","fileName","_jsxFileName","lineNumber","columnNumber","onSearchChange","onThemeToggle","onInputChange","onInputKeyPress","onDueChange","onRecurrenceChange","onTagChange","onAddTask","onFilterChange","onFilterTagChange","onClearCompleted","onToggleNotifications","onUndo","onRedo","canUndo","canRedo","onDragEnd","destination","source","index","Array","from","moved","splice","onEditingTextChange","onStartEdit","onSaveEdit","onToggleComplete","onDeleteTask","_c","$RefreshReg$"],"sources":["/home/tiny/Desktop/TodoApp/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { isBefore, parseISO, addDays, addWeeks, addMonths } from 'date-fns';\nimport { DragDropContext } from '@hello-pangea/dnd';\nimport { initAuth, onAuthChange, subscribeToTasks, addTaskToFirestore, updateTaskInFirestore, deleteTaskFromFirestore } from './firebase';\n\nimport SyncStatus from './components/SyncStatus';\nimport TopBar from './components/TopBar';\nimport InputContainer from './components/InputContainer';\nimport Toolbar from './components/Toolbar';\nimport TaskList from './components/TaskList';\n\nfunction App() {\n  // Input states\n  const [inputText, setInputText] = useState('');\n  const [dueInput, setDueInput] = useState('');\n  const [recurrenceInput, setRecurrenceInput] = useState('none');\n  const [tagInput, setTagInput] = useState('');\n\n  // Task states\n  const [tasks, setTasks] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editingText, setEditingText] = useState('');\n  // History for undo/redo\n  const [historyPast, setHistoryPast] = useState([]);\n  const [historyFuture, setHistoryFuture] = useState([]);\n\n  // Filter states\n  const [filter, setFilter] = useState('all');\n  const [filterTag, setFilterTag] = useState(null);\n  const [searchText, setSearchText] = useState('');\n\n  // Feature states\n  const [notificationsEnabled, setNotificationsEnabled] = useState(false);\n  const [darkMode, setDarkMode] = useState(() => {\n    try {\n      return localStorage.getItem('todoapp_darkmode') === 'true';\n    } catch { return false; }\n  });\n\n  // Firebase states\n  const [userId, setUserId] = useState(null);\n  const [syncStatus, setSyncStatus] = useState('syncing');\n  const [offlineMode, setOfflineMode] = useState(false);\n\n  // Get unique tags from all tasks\n  const allTags = [...new Set(tasks.flatMap(t => t.tags || []))];\n\n  // Load tasks from localStorage on mount\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem('todoapp_tasks');\n      if (raw) setTasks(JSON.parse(raw));\n    } catch (e) {\n      console.warn('Failed to load tasks', e);\n    }\n  }, []);\n\n  // Load history from localStorage on mount\n  useEffect(() => {\n    try {\n      const past = localStorage.getItem('todoapp_history_past');\n      const future = localStorage.getItem('todoapp_history_future');\n      if (past) setHistoryPast(JSON.parse(past));\n      if (future) setHistoryFuture(JSON.parse(future));\n    } catch (e) {\n      console.warn('Failed to load history', e);\n    }\n  }, []);\n\n  // Persist history whenever it changes\n  useEffect(() => {\n    try {\n      localStorage.setItem('todoapp_history_past', JSON.stringify(historyPast));\n      localStorage.setItem('todoapp_history_future', JSON.stringify(historyFuture));\n    } catch (e) {\n      console.warn('Failed to save history', e);\n    }\n  }, [historyPast, historyFuture]);\n\n  // Initialize Firebase and auth\n  useEffect(() => {\n    initAuth();\n    onAuthChange((user) => {\n      if (user) {\n        console.log('üîê Logged in as:', user.uid);\n        setUserId(user.uid);\n        setSyncStatus('syncing');\n      }\n    });\n  }, []);\n\n  // Subscribe to Firestore tasks when user logs in\n  useEffect(() => {\n    if (!userId) return;\n    \n    const unsubscribe = subscribeToTasks(userId, (firestoreTasks) => {\n      console.log('üì• Synced tasks from Firestore:', firestoreTasks);\n      setTasks(firestoreTasks);\n      setSyncStatus('synced');\n      setOfflineMode(false);\n    });\n    \n    return () => unsubscribe && unsubscribe();\n  }, [userId]);\n\n  // Persist tasks whenever they change\n  useEffect(() => {\n    try {\n      localStorage.setItem('todoapp_tasks', JSON.stringify(tasks));\n    } catch (e) {\n      console.warn('Failed to save tasks', e);\n    }\n  }, [tasks]);\n\n  // Persist dark mode\n  useEffect(() => {\n    localStorage.setItem('todoapp_darkmode', darkMode);\n    document.body.className = darkMode ? 'dark-mode' : '';\n  }, [darkMode]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      // Ctrl+D or Cmd+D = toggle dark mode\n      if ((e.ctrlKey || e.metaKey) && e.key === 'd') {\n        e.preventDefault();\n        setDarkMode(prev => !prev);\n      }\n      // Ctrl+Z = Undo ; Ctrl+Shift+Z = Redo\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z') {\n        e.preventDefault();\n        if (e.shiftKey) {\n          redo();\n        } else {\n          undo();\n        }\n      }\n      // Escape = cancel edit\n      if (e.key === 'Escape' && editingId) {\n        setEditingId(null);\n        setEditingText('');\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [editingId]);\n\n  // Notifications: request permission and periodically check due tasks\n  const enableNotifications = async () => {\n    if (!('Notification' in window)) {\n      alert('Browser Anda tidak mendukung Notification API');\n      return;\n    }\n    try {\n      const perm = await Notification.requestPermission();\n      if (perm === 'granted') {\n        setNotificationsEnabled(true);\n      } else {\n        alert('Izin notifikasi ditolak atau dibatalkan');\n      }\n    } catch (e) {\n      console.warn('Notification permission error', e);\n    }\n  };\n\n  useEffect(() => {\n    let timer = null;\n    if (notificationsEnabled) {\n      // check every 30s\n      timer = setInterval(() => {\n        const now = new Date();\n        setTasks(prev => prev.map(t => {\n          if (t.due && !t.completed && !t.notified) {\n            let dueDate;\n            try { dueDate = parseISO(t.due); } catch { return t; }\n            if (dueDate.getTime() <= now.getTime()) {\n              try {\n                if (Notification.permission === 'granted') {\n                  /* eslint-disable no-new */\n                  const { format } = require('date-fns');\n                  new Notification(`Tugas: ${t.text}`, { body: `Tenggat ${format(dueDate, 'Pp')}`, tag: `task-${t.id}` });\n                }\n              } catch (e) {\n                console.warn('Failed sending notification', e);\n              }\n              return { ...t, notified: true };\n            }\n          }\n          return t;\n        }));\n      }, 30000);\n    }\n    return () => { if (timer) clearInterval(timer); };\n  }, [notificationsEnabled]);\n\n  // Core task functions\n  // History helpers for undo/redo\n  const pushHistory = (prevTasks) => {\n    setHistoryPast((h) => {\n      const copy = h.slice(-98); // keep last 99\n      return [...copy, prevTasks];\n    });\n  };\n\n  const applyChange = (updater) => {\n    setTasks((prev) => {\n      const next = typeof updater === 'function' ? updater(prev) : updater;\n      try { pushHistory(prev); } catch (e) { /* ignore */ }\n      setHistoryFuture([]); // clear redo stack\n      return next;\n    });\n  };\n\n  const undo = () => {\n    setHistoryPast((past) => {\n      if (!past || past.length === 0) return past;\n      const previous = past[past.length - 1];\n      setHistoryFuture((f) => [tasks, ...f]);\n      setTasks(previous);\n      return past.slice(0, past.length - 1);\n    });\n  };\n\n  const redo = () => {\n    setHistoryFuture((future) => {\n      if (!future || future.length === 0) return future;\n      const nextState = future[0];\n      setHistoryPast((p) => [...p, tasks]);\n      setTasks(nextState);\n      return future.slice(1);\n    });\n  };\n\n  const addTask = () => {\n    if (inputText.trim()) {\n      const newTask = { \n        id: Date.now(), \n        text: inputText.trim(), \n        completed: false, \n        due: dueInput || null, \n        recurrence: recurrenceInput, \n        notified: false,\n        tags: tagInput ? tagInput.split(',').map(t => t.trim()).filter(t => t) : []\n      };\n      \n      // Try to sync to Firestore\n      if (userId && !offlineMode) {\n        addTaskToFirestore(newTask, userId)\n          .then((docId) => {\n            console.log('‚úÖ Task synced to Firestore:', docId);\n            setTasks(prev => prev.map(t => t.id === newTask.id ? { ...t, firestoreId: docId } : t));\n          })\n          .catch((err) => {\n            console.warn('‚ö†Ô∏è Failed to sync task to Firestore:', err);\n            setOfflineMode(true);\n            setSyncStatus('error');\n          });\n      }\n\n  applyChange(prev => [...prev, newTask]);\n      setInputText('');\n      setDueInput('');\n      setRecurrenceInput('none');\n      setTagInput('');\n    } else {\n      alert('Tulis dulu tugasnya!');\n    }\n  };\n\n  const deleteTask = (id) => {\n    const task = tasks.find(t => t.id === id);\n    if (userId && task?.firestoreId && !offlineMode) {\n      deleteTaskFromFirestore(userId, task.firestoreId)\n        .catch((err) => {\n          console.warn('‚ö†Ô∏è Failed to delete task from Firestore:', err);\n          setOfflineMode(true);\n          setSyncStatus('error');\n        });\n    }\n  applyChange(prev => prev.filter(task => task.id !== id));\n  };\n\n  const toggleComplete = (id) => {\n    const task = tasks.find(t => t.id === id);\n    if (task && !task.completed && task.recurrence && task.recurrence !== 'none') {\n      handleTaskComplete(id);\n    } else {\n      applyChange(prev => prev.map(t => {\n        if (t.id === id) {\n          const updated = { ...t, completed: !t.completed };\n          if (userId && t.firestoreId && !offlineMode) {\n            updateTaskInFirestore(userId, t.firestoreId, updated)\n              .catch((err) => {\n                console.warn('‚ö†Ô∏è Failed to update task in Firestore:', err);\n                setOfflineMode(true);\n                setSyncStatus('error');\n              });\n          }\n          return updated;\n        }\n        return t;\n      }));\n    }\n  };\n\n  const startEdit = (task) => {\n    setEditingId(task.id);\n    setEditingText(task.text);\n  };\n\n  const saveEdit = (id) => {\n    if (!editingText.trim()) {\n      setEditingId(null);\n      setEditingText('');\n      return;\n    }\n    applyChange(prev => prev.map(t => {\n      if (t.id === id) {\n        const updated = { ...t, text: editingText.trim(), notified: t.due && isBefore(parseISO(t.due), new Date()) ? t.notified : false };\n        if (userId && t.firestoreId && !offlineMode) {\n          updateTaskInFirestore(userId, t.firestoreId, updated)\n            .catch((err) => {\n              console.warn('‚ö†Ô∏è Failed to update task in Firestore:', err);\n              setOfflineMode(true);\n              setSyncStatus('error');\n            });\n        }\n        return updated;\n      }\n      return t;\n    }));\n    setEditingId(null);\n    setEditingText('');\n  };\n\n  const clearCompleted = () => {\n    applyChange(prev => prev.filter(t => !t.completed));\n  };\n\n  // Recurring task handler: when completed, generate next occurrence\n  const handleTaskComplete = (id) => {\n    applyChange(prev => {\n      const result = [];\n      prev.forEach(t => {\n        if (t.id === id) {\n          result.push({ ...t, completed: true });\n          if (t.recurrence && t.recurrence !== 'none' && t.due) {\n            try {\n              const dueDate = parseISO(t.due);\n              let nextDue = null;\n              if (t.recurrence === 'daily') nextDue = addDays(dueDate, 1).toISOString();\n              else if (t.recurrence === 'weekly') nextDue = addWeeks(dueDate, 1).toISOString();\n              else if (t.recurrence === 'monthly') nextDue = addMonths(dueDate, 1).toISOString();\n              if (nextDue) {\n                result.push({\n                  id: Date.now() + Math.random(),\n                  text: t.text,\n                  completed: false,\n                  due: nextDue,\n                  recurrence: t.recurrence,\n                  notified: false,\n                  tags: t.tags || []\n                });\n              }\n            } catch (e) { console.warn('Recurrence calc error', e); }\n          }\n        } else {\n          result.push(t);\n        }\n      });\n      return result;\n    });\n  };\n\n  // Filter logic\n  const filtered = tasks.filter(t => {\n    if (filter === 'active') return !t.completed;\n    if (filter === 'completed') return t.completed;\n    return true;\n  }).filter(t => filterTag ? (t.tags && t.tags.includes(filterTag)) : true)\n    .filter(t => searchText ? t.text.toLowerCase().includes(searchText.toLowerCase()) : true);\n\n  const remaining = tasks.filter(t => !t.completed).length;\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') addTask();\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>üìù To-Do List</h1>\n\n      <SyncStatus syncStatus={syncStatus} offlineMode={offlineMode} userId={userId} />\n\n      <TopBar\n        searchText={searchText}\n        onSearchChange={setSearchText}\n        darkMode={darkMode}\n        onThemeToggle={() => setDarkMode(!darkMode)}\n      />\n\n      <InputContainer\n        inputText={inputText}\n        onInputChange={setInputText}\n        onInputKeyPress={handleKeyPress}\n        dueInput={dueInput}\n        onDueChange={setDueInput}\n        recurrenceInput={recurrenceInput}\n        onRecurrenceChange={setRecurrenceInput}\n        tagInput={tagInput}\n        onTagChange={setTagInput}\n        onAddTask={addTask}\n      />\n\n      <Toolbar\n        filter={filter}\n        onFilterChange={setFilter}\n        allTags={allTags}\n        filterTag={filterTag}\n        onFilterTagChange={setFilterTag}\n        remaining={remaining}\n        onClearCompleted={clearCompleted}\n        notificationsEnabled={notificationsEnabled}\n        onToggleNotifications={() => notificationsEnabled ? setNotificationsEnabled(false) : enableNotifications()}\n        onUndo={undo}\n        onRedo={redo}\n        canUndo={historyPast.length > 0}\n        canRedo={historyFuture.length > 0}\n      />\n\n      <DragDropContext onDragEnd={(result) => {\n        const { destination, source } = result;\n        if (!destination) return;\n        if (destination.index === source.index) return;\n        applyChange(prev => {\n          const copy = Array.from(prev);\n          const [moved] = copy.splice(source.index, 1);\n          copy.splice(destination.index, 0, moved);\n          return copy;\n        });\n      }}>\n        <TaskList\n          filtered={filtered}\n          editingId={editingId}\n          editingText={editingText}\n          onEditingTextChange={setEditingText}\n          onStartEdit={startEdit}\n          onSaveEdit={saveEdit}\n          onToggleComplete={toggleComplete}\n          onDeleteTask={deleteTask}\n        />\n      </DragDropContext>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}