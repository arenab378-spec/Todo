{"ast":null,"code":"import _objectSpread from\"/home/tiny/Desktop/TodoApp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{initializeApp}from'firebase/app';import{getFirestore,collection,addDoc,updateDoc,deleteDoc,doc,query,where,onSnapshot,writeBatch}from'firebase/firestore';import{getAuth,signInAnonymously,onAuthStateChanged}from'firebase/auth';// TODO: Replace with your Firebase config\n// Get this from Firebase Console > Project Settings\nconst firebaseConfig={apiKey:process.env.REACT_APP_FIREBASE_API_KEY||\"AIzaSyDemoKey123456789\",// Replace with your API key\nauthDomain:process.env.REACT_APP_FIREBASE_AUTH_DOMAIN||\"todoapp-demo.firebaseapp.com\",projectId:process.env.REACT_APP_FIREBASE_PROJECT_ID||\"todoapp-demo\",storageBucket:process.env.REACT_APP_FIREBASE_STORAGE_BUCKET||\"todoapp-demo.appspot.com\",messagingSenderId:process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||\"123456789\",appId:process.env.REACT_APP_FIREBASE_APP_ID||\"1:123456789:web:abcdef123456789\"};// Initialize Firebase\nconst app=initializeApp(firebaseConfig);export const db=getFirestore(app);export const auth=getAuth(app);// Sign in anonymously\nexport const initAuth=()=>{return signInAnonymously(auth).then(()=>{console.log('✅ Signed in anonymously to Firebase');}).catch(error=>{console.error('❌ Auth error:',error);});};// Listen to auth state changes\nexport const onAuthChange=callback=>{return onAuthStateChanged(auth,callback);};// Add task to Firestore\nexport const addTaskToFirestore=async(task,userId)=>{try{const docRef=await addDoc(collection(db,'users',userId,'tasks'),_objectSpread(_objectSpread({},task),{},{createdAt:new Date(),syncedAt:new Date()}));return docRef.id;}catch(error){console.error('❌ Error adding task:',error);throw error;}};// Update task in Firestore\nexport const updateTaskInFirestore=async(userId,taskId,updates)=>{try{await updateDoc(doc(db,'users',userId,'tasks',taskId),_objectSpread(_objectSpread({},updates),{},{syncedAt:new Date()}));}catch(error){console.error('❌ Error updating task:',error);throw error;}};// Delete task from Firestore\nexport const deleteTaskFromFirestore=async(userId,taskId)=>{try{await deleteDoc(doc(db,'users',userId,'tasks',taskId));}catch(error){console.error('❌ Error deleting task:',error);throw error;}};// Subscribe to real-time updates\nexport const subscribeToTasks=(userId,callback)=>{try{const q=query(collection(db,'users',userId,'tasks'));const unsubscribe=onSnapshot(q,snapshot=>{const tasks=[];snapshot.forEach(doc=>{tasks.push(_objectSpread({id:doc.id},doc.data()));});callback(tasks);});return unsubscribe;}catch(error){console.error('❌ Error subscribing to tasks:',error);}};// Sync local tasks to Firestore (bulk operation)\nexport const syncLocalTasksToFirestore=async(userId,localTasks)=>{try{const batch=writeBatch(db);const userTasksRef=collection(db,'users',userId,'tasks');localTasks.forEach(task=>{if(!task.firestoreId){// New task - add to Firestore\nconst docRef=doc(userTasksRef);batch.set(docRef,_objectSpread(_objectSpread({},task),{},{createdAt:new Date(),syncedAt:new Date()}));task.firestoreId=docRef.id;}else{// Existing task - update\nbatch.update(doc(userTasksRef,task.firestoreId),_objectSpread(_objectSpread({},task),{},{syncedAt:new Date()}));}});await batch.commit();console.log('✅ Local tasks synced to Firestore');}catch(error){console.error('❌ Error syncing tasks:',error);throw error;}};","map":{"version":3,"names":["initializeApp","getFirestore","collection","addDoc","updateDoc","deleteDoc","doc","query","where","onSnapshot","writeBatch","getAuth","signInAnonymously","onAuthStateChanged","firebaseConfig","apiKey","process","env","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","projectId","REACT_APP_FIREBASE_PROJECT_ID","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","appId","REACT_APP_FIREBASE_APP_ID","app","db","auth","initAuth","then","console","log","catch","error","onAuthChange","callback","addTaskToFirestore","task","userId","docRef","_objectSpread","createdAt","Date","syncedAt","id","updateTaskInFirestore","taskId","updates","deleteTaskFromFirestore","subscribeToTasks","q","unsubscribe","snapshot","tasks","forEach","push","data","syncLocalTasksToFirestore","localTasks","batch","userTasksRef","firestoreId","set","update","commit"],"sources":["/home/tiny/Desktop/TodoApp/src/firebase.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, query, where, onSnapshot, writeBatch } from 'firebase/firestore';\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\n\n// TODO: Replace with your Firebase config\n// Get this from Firebase Console > Project Settings\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY || \"AIzaSyDemoKey123456789\", // Replace with your API key\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN || \"todoapp-demo.firebaseapp.com\",\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID || \"todoapp-demo\",\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET || \"todoapp-demo.appspot.com\",\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID || \"123456789\",\n  appId: process.env.REACT_APP_FIREBASE_APP_ID || \"1:123456789:web:abcdef123456789\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nexport const db = getFirestore(app);\nexport const auth = getAuth(app);\n\n// Sign in anonymously\nexport const initAuth = () => {\n  return signInAnonymously(auth)\n    .then(() => {\n      console.log('✅ Signed in anonymously to Firebase');\n    })\n    .catch((error) => {\n      console.error('❌ Auth error:', error);\n    });\n};\n\n// Listen to auth state changes\nexport const onAuthChange = (callback) => {\n  return onAuthStateChanged(auth, callback);\n};\n\n// Add task to Firestore\nexport const addTaskToFirestore = async (task, userId) => {\n  try {\n    const docRef = await addDoc(collection(db, 'users', userId, 'tasks'), {\n      ...task,\n      createdAt: new Date(),\n      syncedAt: new Date()\n    });\n    return docRef.id;\n  } catch (error) {\n    console.error('❌ Error adding task:', error);\n    throw error;\n  }\n};\n\n// Update task in Firestore\nexport const updateTaskInFirestore = async (userId, taskId, updates) => {\n  try {\n    await updateDoc(doc(db, 'users', userId, 'tasks', taskId), {\n      ...updates,\n      syncedAt: new Date()\n    });\n  } catch (error) {\n    console.error('❌ Error updating task:', error);\n    throw error;\n  }\n};\n\n// Delete task from Firestore\nexport const deleteTaskFromFirestore = async (userId, taskId) => {\n  try {\n    await deleteDoc(doc(db, 'users', userId, 'tasks', taskId));\n  } catch (error) {\n    console.error('❌ Error deleting task:', error);\n    throw error;\n  }\n};\n\n// Subscribe to real-time updates\nexport const subscribeToTasks = (userId, callback) => {\n  try {\n    const q = query(collection(db, 'users', userId, 'tasks'));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const tasks = [];\n      snapshot.forEach((doc) => {\n        tasks.push({\n          id: doc.id,\n          ...doc.data()\n        });\n      });\n      callback(tasks);\n    });\n    return unsubscribe;\n  } catch (error) {\n    console.error('❌ Error subscribing to tasks:', error);\n  }\n};\n\n// Sync local tasks to Firestore (bulk operation)\nexport const syncLocalTasksToFirestore = async (userId, localTasks) => {\n  try {\n    const batch = writeBatch(db);\n    const userTasksRef = collection(db, 'users', userId, 'tasks');\n    \n    localTasks.forEach((task) => {\n      if (!task.firestoreId) {\n        // New task - add to Firestore\n        const docRef = doc(userTasksRef);\n        batch.set(docRef, {\n          ...task,\n          createdAt: new Date(),\n          syncedAt: new Date()\n        });\n        task.firestoreId = docRef.id;\n      } else {\n        // Existing task - update\n        batch.update(doc(userTasksRef, task.firestoreId), {\n          ...task,\n          syncedAt: new Date()\n        });\n      }\n    });\n    \n    await batch.commit();\n    console.log('✅ Local tasks synced to Firestore');\n  } catch (error) {\n    console.error('❌ Error syncing tasks:', error);\n    throw error;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}