{"ast":null,"code":"import { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, query, where, onSnapshot, writeBatch } from 'firebase/firestore';\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\n\n// TODO: Replace with your Firebase config\n// Get this from Firebase Console > Project Settings\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY || \"AIzaSyDemoKey123456789\",\n  // Replace with your API key\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN || \"todoapp-demo.firebaseapp.com\",\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID || \"todoapp-demo\",\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET || \"todoapp-demo.appspot.com\",\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID || \"123456789\",\n  appId: process.env.REACT_APP_FIREBASE_APP_ID || \"1:123456789:web:abcdef123456789\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nexport const db = getFirestore(app);\nexport const auth = getAuth(app);\n\n// Sign in anonymously\nexport const initAuth = () => {\n  return signInAnonymously(auth).then(() => {\n    console.log('✅ Signed in anonymously to Firebase');\n  }).catch(error => {\n    console.error('❌ Auth error:', error);\n  });\n};\n\n// Listen to auth state changes\nexport const onAuthChange = callback => {\n  return onAuthStateChanged(auth, callback);\n};\n\n// Add task to Firestore\nexport const addTaskToFirestore = async (task, userId) => {\n  try {\n    const docRef = await addDoc(collection(db, 'users', userId, 'tasks'), {\n      ...task,\n      createdAt: new Date(),\n      syncedAt: new Date()\n    });\n    return docRef.id;\n  } catch (error) {\n    console.error('❌ Error adding task:', error);\n    throw error;\n  }\n};\n\n// Update task in Firestore\nexport const updateTaskInFirestore = async (userId, taskId, updates) => {\n  try {\n    await updateDoc(doc(db, 'users', userId, 'tasks', taskId), {\n      ...updates,\n      syncedAt: new Date()\n    });\n  } catch (error) {\n    console.error('❌ Error updating task:', error);\n    throw error;\n  }\n};\n\n// Delete task from Firestore\nexport const deleteTaskFromFirestore = async (userId, taskId) => {\n  try {\n    await deleteDoc(doc(db, 'users', userId, 'tasks', taskId));\n  } catch (error) {\n    console.error('❌ Error deleting task:', error);\n    throw error;\n  }\n};\n\n// Subscribe to real-time updates\nexport const subscribeToTasks = (userId, callback) => {\n  try {\n    const q = query(collection(db, 'users', userId, 'tasks'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const tasks = [];\n      snapshot.forEach(doc => {\n        tasks.push({\n          id: doc.id,\n          ...doc.data()\n        });\n      });\n      callback(tasks);\n    });\n    return unsubscribe;\n  } catch (error) {\n    console.error('❌ Error subscribing to tasks:', error);\n  }\n};\n\n// Sync local tasks to Firestore (bulk operation)\nexport const syncLocalTasksToFirestore = async (userId, localTasks) => {\n  try {\n    const batch = writeBatch(db);\n    const userTasksRef = collection(db, 'users', userId, 'tasks');\n    localTasks.forEach(task => {\n      if (!task.firestoreId) {\n        // New task - add to Firestore\n        const docRef = doc(userTasksRef);\n        batch.set(docRef, {\n          ...task,\n          createdAt: new Date(),\n          syncedAt: new Date()\n        });\n        task.firestoreId = docRef.id;\n      } else {\n        // Existing task - update\n        batch.update(doc(userTasksRef, task.firestoreId), {\n          ...task,\n          syncedAt: new Date()\n        });\n      }\n    });\n    await batch.commit();\n    console.log('✅ Local tasks synced to Firestore');\n  } catch (error) {\n    console.error('❌ Error syncing tasks:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["initializeApp","getFirestore","collection","addDoc","updateDoc","deleteDoc","doc","query","where","onSnapshot","writeBatch","getAuth","signInAnonymously","onAuthStateChanged","firebaseConfig","apiKey","process","env","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","projectId","REACT_APP_FIREBASE_PROJECT_ID","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","appId","REACT_APP_FIREBASE_APP_ID","app","db","auth","initAuth","then","console","log","catch","error","onAuthChange","callback","addTaskToFirestore","task","userId","docRef","createdAt","Date","syncedAt","id","updateTaskInFirestore","taskId","updates","deleteTaskFromFirestore","subscribeToTasks","q","unsubscribe","snapshot","tasks","forEach","push","data","syncLocalTasksToFirestore","localTasks","batch","userTasksRef","firestoreId","set","update","commit"],"sources":["/home/tiny/Desktop/TodoApp/src/firebase.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, query, where, onSnapshot, writeBatch } from 'firebase/firestore';\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\n\n// TODO: Replace with your Firebase config\n// Get this from Firebase Console > Project Settings\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY || \"AIzaSyDemoKey123456789\", // Replace with your API key\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN || \"todoapp-demo.firebaseapp.com\",\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID || \"todoapp-demo\",\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET || \"todoapp-demo.appspot.com\",\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID || \"123456789\",\n  appId: process.env.REACT_APP_FIREBASE_APP_ID || \"1:123456789:web:abcdef123456789\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nexport const db = getFirestore(app);\nexport const auth = getAuth(app);\n\n// Sign in anonymously\nexport const initAuth = () => {\n  return signInAnonymously(auth)\n    .then(() => {\n      console.log('✅ Signed in anonymously to Firebase');\n    })\n    .catch((error) => {\n      console.error('❌ Auth error:', error);\n    });\n};\n\n// Listen to auth state changes\nexport const onAuthChange = (callback) => {\n  return onAuthStateChanged(auth, callback);\n};\n\n// Add task to Firestore\nexport const addTaskToFirestore = async (task, userId) => {\n  try {\n    const docRef = await addDoc(collection(db, 'users', userId, 'tasks'), {\n      ...task,\n      createdAt: new Date(),\n      syncedAt: new Date()\n    });\n    return docRef.id;\n  } catch (error) {\n    console.error('❌ Error adding task:', error);\n    throw error;\n  }\n};\n\n// Update task in Firestore\nexport const updateTaskInFirestore = async (userId, taskId, updates) => {\n  try {\n    await updateDoc(doc(db, 'users', userId, 'tasks', taskId), {\n      ...updates,\n      syncedAt: new Date()\n    });\n  } catch (error) {\n    console.error('❌ Error updating task:', error);\n    throw error;\n  }\n};\n\n// Delete task from Firestore\nexport const deleteTaskFromFirestore = async (userId, taskId) => {\n  try {\n    await deleteDoc(doc(db, 'users', userId, 'tasks', taskId));\n  } catch (error) {\n    console.error('❌ Error deleting task:', error);\n    throw error;\n  }\n};\n\n// Subscribe to real-time updates\nexport const subscribeToTasks = (userId, callback) => {\n  try {\n    const q = query(collection(db, 'users', userId, 'tasks'));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const tasks = [];\n      snapshot.forEach((doc) => {\n        tasks.push({\n          id: doc.id,\n          ...doc.data()\n        });\n      });\n      callback(tasks);\n    });\n    return unsubscribe;\n  } catch (error) {\n    console.error('❌ Error subscribing to tasks:', error);\n  }\n};\n\n// Sync local tasks to Firestore (bulk operation)\nexport const syncLocalTasksToFirestore = async (userId, localTasks) => {\n  try {\n    const batch = writeBatch(db);\n    const userTasksRef = collection(db, 'users', userId, 'tasks');\n    \n    localTasks.forEach((task) => {\n      if (!task.firestoreId) {\n        // New task - add to Firestore\n        const docRef = doc(userTasksRef);\n        batch.set(docRef, {\n          ...task,\n          createdAt: new Date(),\n          syncedAt: new Date()\n        });\n        task.firestoreId = docRef.id;\n      } else {\n        // Existing task - update\n        batch.update(doc(userTasksRef, task.firestoreId), {\n          ...task,\n          syncedAt: new Date()\n        });\n      }\n    });\n    \n    await batch.commit();\n    console.log('✅ Local tasks synced to Firestore');\n  } catch (error) {\n    console.error('❌ Error syncing tasks:', error);\n    throw error;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}